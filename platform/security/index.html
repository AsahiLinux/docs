
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Porting Linux to Apple Silicon">
      
      
      
        <link rel="canonical" href="https://asahilinux.org/docs/platform/security/">
      
      
        <link rel="prev" href="../subsystems/">
      
      
        <link rel="next" href="../../hw/devices/device-list/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.6">
    
    
      
        <title>Apple Silicon Platform Security - Asahi Linux Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Apple Silicon Platform Security - Asahi Linux Documentation" >
      
        <meta  property="og:description"  content="Porting Linux to Apple Silicon" >
      
        <meta  property="og:image"  content="https://asahilinux.org/docs/assets/images/social/platform/security.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://asahilinux.org/docs/platform/security/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Apple Silicon Platform Security - Asahi Linux Documentation" >
      
        <meta  name="twitter:description"  content="Porting Linux to Apple Silicon" >
      
        <meta  name="twitter:image"  content="https://asahilinux.org/docs/assets/images/social/platform/security.png" >
      
    
    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Asahi Linux Documentation" class="md-header__button md-logo" aria-label="Asahi Linux Documentation" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Asahi Linux Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Apple Silicon Platform Security
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/AsahiLinux/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    AsahiLinux/docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Asahi Linux Documentation" class="md-nav__button md-logo" aria-label="Asahi Linux Documentation" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Asahi Linux Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/AsahiLinux/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    AsahiLinux/docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Feature Support
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Feature Support
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../feature-support/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../feature-support/m1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    M1 Series Feature Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../feature-support/m2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    M2 Series Feature Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../feature-support/m3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    M3 Series Feature Support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../feature-support/m4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    M4 Series Feature Support
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Project related
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Project related
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../project/glossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../project/faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../project/when-will-asahi-be-done/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    When will Asahi Linux be done?
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../project/references/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    References
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../project/board/asahi-board/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Asahi Linux Board
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Policies
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Policies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../project/policies/slop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generative AI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Platform documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Platform documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../subsystems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Apple Silicon Subsystems
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Apple Platform Security Crash Course
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Apple Platform Security Crash Course
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-data-integrity" class="md-nav__link">
    <span class="md-ellipsis">
      System data integrity
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#per-container-security-policies" class="md-nav__link">
    <span class="md-ellipsis">
      Per-container security policies
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-user-trust-root" class="md-nav__link">
    <span class="md-ellipsis">
      The user trust root
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#paired-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      Paired recovery
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disk-encryption" class="md-nav__link">
    <span class="md-ellipsis">
      Disk encryption
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apples-unspoken-agreement" class="md-nav__link">
    <span class="md-ellipsis">
      Apple's unspoken agreement
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Apple's unspoken agreement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-we-uphold-this-agreement" class="md-nav__link">
    <span class="md-ellipsis">
      How we uphold this agreement
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/devices/device-list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Devices
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/soc/soc-codenames/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Codenames
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/soc/display-controllers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Display Controllers
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    For users
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            For users
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://docs.fedoraproject.org/en-US/fedora-asahi-remix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fedora Asahi Remix Documentation <i class="fa-solid fa-arrow-up-right-from-square"></i>
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/broken-software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Broken Software
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/partitioning-cheatsheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Partitioning Cheatsheet
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/windows-11-vm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows 11 VM setup guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    For developers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            For developers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../project/help-wanted/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Yaks in need of shaving (HELP WANTED!)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/tethered-boot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tethered Boot Setup (For Developers)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/m1n1-user-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    m1n1:User Guide Boot loader
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/m1n1-hypervisor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hypervisor
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/u-boot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    U-Boot
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/devicetree-bindings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Devicetree bindings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../open-os-interop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Open OS ecosystem on Apple Silicon Macs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/audio-userspace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Userspace Audio Stack
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    For distributions/OSes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            For distributions/OSes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../alt/policy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distro guidelines
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Apple Platform Security Crash Course</h1>

<h5 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h5>
<p>The Apple Silicon platform has been designed from the ground up to offer properly configured systems
an extremely secure operating environment that is resilient to multiple forms of attack. The security
model is based on the Swiss Cheese Model - no single security mechanism can guarantee an acceptable
level of security on its own, so mechanisms are layered to cover each others' holes.</p>
<p>Platform security features are orchestrated by the Secure Enclave Processor (SEP). An overview of the SEP's
features, the different boot policies, and the boot picker itself is available at <a href="../introduction/">Introduction to Apple Silicon</a>.
This page instead attempts to extrapolate upon and clarify the concepts which may be of interest to
users and system maintainers.</p>
<p>At a high level, the Apple Silicon security model in Full Security mode is comprised of six key concepts:</p>
<ol>
<li>The integrity of system and boot-critical data is guaranteed at all times</li>
<li>Security policies are configurable on a per-container basis</li>
<li>The hardware and user together form the trust root for all security operations</li>
<li>The security and boot policy of one container shall not affect any other containers</li>
<li>All data is transparently encrypted at rest</li>
<li>Decryption of user data can be gated behind authentication</li>
</ol>
<p>This document covers the implementation of the security model on a standard macOS container in Full Security
mode, and how the system has been engineered to allow a user to execute arbitrary code (i.e. third party operating
systems) without compromising on the guarantees Apple makes of macOS in Full Security mode. This is a unique
selling point of the platform, as it departs from the all-or-nothing approach of the PC's Secure Boot in
some very clever ways. It is the perfect way to illustrate why one must exercise caution when attempting
to make equivalencies between the PC and Apple Silicon.</p>
<h5 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h5>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#system-data-integrity">System data integrity</a></li>
<li><a href="#per-container-security-policies">Per-container security policies</a></li>
<li><a href="#the-user-trust-root">The user trust root</a></li>
<li><a href="#paired-recovery">Paired recovery</a></li>
<li><a href="#disk-encryption">Disk encryption</a></li>
<li><a href="#apples-unspoken-agreement">Apple's unspoken agreement</a></li>
<li><a href="#how-we-uphold-this-agreement">How we uphold this agreement</a></li>
</ul>
<h5 id="system-data-integrity">System data integrity<a class="headerlink" href="#system-data-integrity" title="Permanent link">&para;</a></h5>
<p>The platform goes to great lengths to verify and maintain the integrity of system data. All system files are,
at minimum, signed and hashed by Apple. Critical firmware components, such as sepOS (and in older versions, iBoot) are also encrypted.
The system verifies the integrity of all of these components before they are allowed to execute. If any of these
components fail verification for any reason, the system will fail to boot and direct the user to restore
their machine.</p>
<p>This model extends from the firmware and bootloader up into macOS itself. The SEP maintains a Boot Policy
for each APFS container, which enrolls a macOS kernelcache and system data volume allowed to be booted.
The kernelcache is signed by Apple, and its hash is recorded in the SEP's Boot Policy. If the hash of the provided
kernelcache is mismatched with the one in the SEP's Boot Policy or it has not been signed by Apple, the system will
refuse to boot that APFS container.</p>
<p>The OS snapshot itself is a hashed disk image. Every file inside it is also hashed, and the Merkle tree of these hashes
is used to compute a final hash known as the Volume Seal which is used to sign the volume. If the hash
of the image itself or the seal does not match the SEP's Boot Policy, then the system will not boot.
Mutable user data is stored on an entirely different volume on the container, and is unioned with the snapshot to
be presented as a single filesystem to the user only after the snapshot has been verified. No file may intersect the
OS snapshot and the user data volume, and it is impossible to mutate the snapshot at all in Full Security mode. This
feature is known as Sealed System Volume (SSV).</p>
<p>An enrolled kernelcache can also not be used to pivot to an untrusted root. A kernelcache can only be used
to mount and boot the OS snapshot that it is enrolled for in the Boot Policy. The SEP will halt booting
if a kernelcache is attempting to mount an OS snapshot it is not authorised to mount. This prevents the
capturing of the entire system from one compromised container.</p>
<h5 id="per-container-security-policies">Per-container security policies<a class="headerlink" href="#per-container-security-policies" title="Permanent link">&para;</a></h5>
<p>Apple knows that this level of lockdown is not suitable in all cases for all users. What if someone wants
to develop and test a kernel extension, for example? On Intel Macs, tampering with the system files could
be achieved by disabling System Integrity Protection. On Apple Silicon, Apple have taken a more granular approach,
with the SEP able to track security policies on a per-container level. This allows users to maintain a
fully secure macOS installation while also experimenting with a more permissive environment.</p>
<p>Apple have stated publicly that the intention for this feature is to allow third-party OS installation without
Apple having to compromise on their security guarantees for macOS, and have even stated that they would
welcome Microsoft porting Windows to the platform.</p>
<p>An APFS container recognised as a valid macOS system (certain filesystem structures must be present) can
be placed into Permissive Security mode. This is often billed as allowing users to "run" arbitrary code,
however there is some nuance here. What is <em>actually</em> being allowed is the enrollment of macOS kernelcaches
that are not signed by Apple into a Boot Policy for the container, and the disabling of SSV. The user
provides a kernelcache to the SEP which hashes it, signs it, and creates a Boot Policy for the container.</p>
<p>Other system integrity guarantees still apply to Permissive Mode containers. The system will still refuse
to boot if the firmware or bootloader has been compromised, likewise if the user-provided kernelcache is
tampered with after being enrolled in the SEP. The paired recoveryOS snapshot must also still be signed by Apple
for reasons we will get into soon. If the user wishes to change the kernelcache again after enrolling it, they must
enroll another. This ensures the platform that you trust the binary.</p>
<p>But what if a bad actor gets into your Permissive Security container? Wouldn't they be able to enroll a
new kernelcache and silently capture the container from under your nose? Unsurprisingly, Apple thought of this
and have a very simple way to mitigate this attack vector.</p>
<h5 id="the-user-trust-root">The user trust root<a class="headerlink" href="#the-user-trust-root" title="Permanent link">&para;</a></h5>
<p>While the SEP is the hardware trust root for cryptographic operations, there is in fact another component
which forms a trust root for operations that alter a container's security or boot settings. You.</p>
<p>The user's interaction with the SEP forms the ultimate trust root for the platform's security model. 
Upon initial setup of an Apple Silicon machine, the SEP enrolls a set of "Machine Owner" credentials, 
which are the credentials of the first macOS account set up on the machine in a Full Security container.
This set of Machine Owner credentials is used to authenticate and sign any operations that alter the state
of a container's security or boot policy. This alone does not create a "true" hardware trust root out of
the user, since someone <em>may</em> capture the Machine Owner credentials, but the SEP is smart enough to
do one more check to make sure the Machine Owner is who they say they are.</p>
<p>Apple Silicon machines can be booted in various states, which are controlled by the SEP and iBoot. One of these
states, 1TR, can only ever be entered from a cold boot by holding the physical power button, and authenticating
with Machine Owner credentials. If the SEP is not satisfied that <em>both</em> these conditions have been intentionally
met (e.g. the power button is released prematurely), then it will not register a 1TR boot. Security operations
such as demoting a container to Permissive Security can <strong>only</strong> be done from 1TR. The SEP will simply refuse
to complete the transaction if it is not satisfied that the request originated from a valid 1TR environment.
Some operations, such as installing a custom boot object, require the Machine Owner credentials to be entered
a second time.</p>
<p>This allows the SEP to form a hardware trust root out of the user themself with which to sign security policy
transactions, guaranteeing to itself that the owner of the machine explicitly trusts the operation being requested.
This is sufficient to mitigate most classes of attack that could compromise the boot process on any container, 
whether locally or remotely executed.</p>
<h5 id="paired-recovery">Paired recovery<a class="headerlink" href="#paired-recovery" title="Permanent link">&para;</a></h5>
<p>This one is very simple. Starting with macOS 12, booting into 1TR takes you to the paired
recovery snapshot of the blessed APFS container. The SEP will only let you make changes to the blessed container,
which helps to limit the spread of damage if a container is somehow compromised to the point where a malicious
actor has somehow managed to bypass both the physical presence and Machine Owner checks.</p>
<h5 id="disk-encryption">Disk encryption<a class="headerlink" href="#disk-encryption" title="Permanent link">&para;</a></h5>
<p>Since the introduction of the T2, Macs have had quite robust and transparent per-volume encryption. It is for this reason
that Apple cannot replace faulty SSDs in post-T2 Macs without total data loss. The default state for this system
is data encrypted at rest - the machine will transparently decrypt the data in flight with its own keys, while it
remains encrypted on the disk. There is almost no performance penalty for this. On Apple Silicon machines, the SEP
generates a Volume Encryption Key (VEK) and eXtended Anti-Replay Token (xART) for each APFS volume. The xART prevents
replay attacks from capturing the VEK, which is stored in the SEP's own airgapped memory and can never be read by
the application cores to further harden it against capture.</p>
<p>Data on the volume is encrypted/decrypted in flight. sepOS passes the keys directly to the NVMe controller,
bypassing the application cores to harden against key capture. It is important to be aware that once the machine
has powered on and the SEP is satisfied with the state of iBoot and the system firmware, the keys are unwrapped and
<strong>all data is accessible</strong> in the clear across all partitions. This is where FileVault comes in for macOS.</p>
<p>When FileVault is enabled for an APFS volume, the VEK and xART are wrapped with a Key Encryption Key (KEK), which is backed
by user credentials from the macOS container in question. The machine will be unable to read the user data volume of the
protected container until these credentials are provided at startup. Enabling this is instantaneous on Apple Silicon machines, since
the only required operation is generating the KEK and a recovery key. The system snapshot, Preboot, and
recovery volumes are not protected by FileVault. These partitions are immutable, backed by the SEP, and contain no user data
and therefore do not particularly benefit from FileVault. All encryption keys are destroyed by the SEP
when the Machine Owner requests the machine to be wiped, guaranteeing that any residual data is indecipherable even to data recovery
programs.</p>
<p>We can very emulate this with LUKS on top of LVM and achieve effective full disk encryption. We have the luxury of disregarding the
APFS stub since the only things we care about there are m1n1 and recoveryOS, both of which are verified, signed and tamper-proof.
An existing weakness is that <code>/boot</code> must be stored in the clear, and there is currently no
Secure Boot or Measured Boot analogue with which we can guarantee the integrity of the kernel or initramfs. Users may choose
to point their bootloader to removeable media once this is better supported to mitigate this. Beyond that, any bootloader which supports LUKS
and LVM will work with a standard <code>cryptsetup</code> workflow once the user has set up their partitions to their liking.</p>
<h5 id="apples-unspoken-agreement">Apple's unspoken agreement<a class="headerlink" href="#apples-unspoken-agreement" title="Permanent link">&para;</a></h5>
<p>When documenting the security model, Apple use the example of an XNU kernel developer wishing to test
their changes on a second macOS installation. It is apparent however that the platform security model
was engineered to allow third party operating systems to coexist with macOS in a way that
does not compromise any of Apple's security guarantees for macOS itself. Rumours circulating that Apple
are actively hostile towards efforts such as Asahi, or that their security must be bypassed or jailbroken to run
untrusted code are unfounded and false. In fact, Apple have expended effort and time on <em>improving</em> their
security tooling in ways that <em>only</em> improve the execution of non-macOS binaries. An example of this is
giving their Boot Policy configuration tool the ability to wrap raw AArch64 code in a proper Mach-O format
starting with macOS 12.1. This is only ever required for enrolling a boot object that is not already
a macOS kernelcache. </p>
<p>That said, an agreement necessarily cuts two ways. Given that Apple Silicon Macs are essentially scaled up
iDevices, Apple went out of their way to alter that security model to be more flexible and it is not hard to
infer why. At some level in the company, someone would have been well aware that a project like Asahi would
be inevitable, whether that be with their consent or not. Rather than risk the jailbreaking community
embarrassing their privacy and security marketing guarantees trying to get arbitrary code to run,
they have given us the tools to easily do it without needing to touch their sandbox. Thus, we take this
functionality as coming with one simple condition - do not, under any circumstances, attempt to poison the
macOS container.</p>
<h6 id="how-we-uphold-this-agreement">How we uphold this agreement<a class="headerlink" href="#how-we-uphold-this-agreement" title="Permanent link">&para;</a></h6>
<p>Asahi Linux creates a small APFS container and volume set with the correct file structure to be recognised as a valid OS,
then uses Apple's tooling to set its security to Permissive and enroll m1n1 as its signed boot object. We do
not - and never will - alter the security settings of <em>any other</em> OS volume, nor will Apple's security
policies for those containers affect the Asahi volume. More details can be found at <a href="../open-os-interop/">Open OS Ecosystem on Apple Silicon Macs</a>.</p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand", "navigation.instant", "navigation.sections", "navigation.tracking", "navigation.top", "toc.integrate"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>